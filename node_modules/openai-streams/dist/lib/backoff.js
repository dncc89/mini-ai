const s=async(n,i,{delay:r,maxRetries:o}={delay:500,maxRetries:7})=>{for(let t=0;t<=o;t++)try{const e=await fetch(n,i);if(!e.ok&&(await e.json()).type==="RATE_LIMIT_REACHED")throw new Error("RATE_LIMIT_REACHED");return e}catch(e){if(e.message==="RATE_LIMIT_REACHED"&&t<o)console.log("Rate limit reached. Retrying in "+r+"ms"),await new Promise(a=>setTimeout(a,r)),r*=2;else throw e}throw new Error("Max retries reached.")};export{s as fetchWithBackoff};
